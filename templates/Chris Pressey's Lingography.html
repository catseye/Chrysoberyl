{# bespoke template for Chris Pressey's Lingography #}
{% extends "base.html" %}

{% block content %}

<h3>Languages I've Designed ({{ lingography()|length }})</h3>

<ul>
{% for thing in lingography() %}
  <li>
    <p>{{ link(thing) }} ({{ data[thing].inception_date }})</p>
    
    {% if data[thing].description_html %}
      {{ data[thing].description_html }}
    {% endif %}
    
    {% if data[thing].commentary_html %}
      {{ data[thing].commentary_html }}
    {% endif %}
    
    {% if data[thing].sample_html %}
      <div class="sample">{{ data[thing].sample_html }}</div>
    {% endif %}

    {% if data[thing].online_implementations %}
      <p>Try it online:</p>
      <ul>
        {% for oikey in data[thing].online_implementations|sort %}
          <li><a class="online" href="{{ data[oikey].exhibit_link }}">{{ oikey }}</a> ({{ data[oikey].medium }})</li>
        {% endfor %}
      </ul>
    {% endif %}

    {% if related('implementation_of', key=thing) %}
      <p>Implementations:</p>
      <ul>
        {% for implementation in related('implementation_of', key=thing) %}
          <li>
            <p>{{ link(implementation) }}</p>
          </li>
        {% endfor %}
      </ul>
    {% endif %}
    {% if related('member_of', key=thing) %}
      <p>Members of {{thing}}:</p>
      <ul>
        {% for member in related('member_of', key=thing)|sort %}
          <li>
            <p>{{ link(member) }}</p>
          </li>
        {% endfor %}
      </ul>
    {% endif %}
    {% if related('variant_of', key=thing) %}
      <p>Variants of {{thing}}:</p>
      <ul>
        {% for variant in related('variant_of', key=thing)|sort %}
          <li>
            <p>{{ link(variant) }}</p>
          </li>
        {% endfor %}
      </ul>
    {% endif %}
  </li>
{% endfor %}
</ul>

<h3>Languages I've Implemented</h3>

<ul>
{%- for thing in data|sort -%}
  {%- if data[thing].type == 'Implementation' and
        'Chris Pressey' in data[thing].authors and
        data[data[thing].implementation_of[0]].type == 'Programming Language' and
        'Chris Pressey' not in data[data[thing].implementation_of[0]].authors and
        data[thing].development_stage not in ['idea', 'work in progress', 'abandoned', 'lost'] -%}
    <li>
      <p>
        {{ link(thing) }},
        {{ indefart(data[thing].implementation_type) }}
        for
        {{ link(data[thing].implementation_of[0]) }}
        in
        {{ link(data[thing].host_language) }}
        {% if data[thing].host_platform %}
          for {{ link(data[thing].host_platform) }}
        {% endif %}
        {% if data[thing].inception_date %}
          ({{ data[thing].inception_date }})
        {% endif %}
      </p>
      {% if data[thing].description_html %}
        {{ data[thing].description_html }}
      {% endif %}
      {% if data[thing].commentary_html %}
        {{ data[thing].commentary_html }}
      {% endif %}
    </li>
  {%- endif -%}
{%- endfor -%}
</ul>

{% endblock content %}
