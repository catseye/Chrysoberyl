<!DOCTYPE html>
<head>
  <meta charset=utf-8>
  <title>{{ key }}</title>
</head>
<body>
  <h1>{{ key }}</h1>
  {% block showtype %}
    <p id="type"><a href="{{ filekey(type) }}">{{ type }}</a></p>
  {% endblock showtype %}

  {% if authors %}
    <p>By
      {% for author in authors %}
        <a href="{{ filekey(author) }}">{{ author }}</a>
      {% endfor %}
      {%- if auspices -%}
        ,
        {% for auspice in auspices %}
          <a href="{{ filekey(auspice) }}">{{ auspice }}</a>
        {% endfor %}
      {%- endif -%}
    </p>
  {% endif %}

  {% if genre %}
    <p id="genre">Genre: <a href="{{ filekey(genre) }}">{{ genre }}</a></p>
  {% endif %}
  {% if esowiki %}
    <p id="esowiki">Esowiki: <a href="http://esolangs.org/wiki/{{ esowiki }}">{{ esowiki }}</a></p>
  {% endif %}
  {% if wikipedia %}
    <p id="wikipedia">Wikipedia: <a href="http://wikipedia.org/wiki/{{ wikipedia }}">{{ wikipedia }}</a></p>
  {% endif %}

  {% if description %}
    <h2>Description</h2>
    <p id="description">{{ description_html }}</p>
  {% endif %}

  {% block content %}
  {% endblock content %}

  {% if references %}
  <h2>References</h2>
  <ul>
    {% for reference in references %}
    <li>
      <a href="{{ reference.url }}">{{ reference.title }}</a> -- {{ reference.description }}
    </li>
    {% endfor %}
  </ul>
  {% endif %}

  {% if commentary %}
    <h2>Commentary</h2>
    <p id="commentary">{{ commentary_html }}</p>
  {% endif %}
  
  <p>
    Spot an error on this page?
    {# TODO: urlencode instead #}
    <a href="https://github.com/catseye/Chrysoberyl/issues/new?title=problem+with+node+{{ filekey(key) }}">Report it here!</a>
  </p>
</body>
