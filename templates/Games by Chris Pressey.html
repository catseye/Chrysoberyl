{# bespoke template #}
{% extends "base.html" %}

{% block content %}

<h3>Games I've Designed</h3>

<ul>
{%- for thing in data|sort -%}
  {%- if data[thing].type == 'Game' and
        'Chris Pressey' in data[thing].authors and
        data[thing].development_stage not in ['idea', 'work in progress', 'abandoned', 'lost'] -%}
    <li>
      <p>
        {{ link(thing) }} ({{ data[thing].inception_date }})
        {{ online_buttons(thing) }}
      </p>

      {% if data[thing].images %}
        <div class="row-fluid">
          <div class="span8">
            {{ md2html(data[thing].description) }}
          </div>
          <div class="span4">
            {% for image in data[thing].images %}
              <img src="{{ image }}">
            {% endfor %}
          </div>
        </div>
      {% elif data[thing].description %}
        {{ md2html(data[thing].description) }}
      {% endif %}

      {% if data[thing].commentary %}
        {{ md2html(data[thing].commentary) }}
      {% endif %}

      {# screenshot #}
    </li>
  {%- endif -%}
{%- endfor -%}
</ul>

<h3>Games I've Implemented</h3>

<ul>
{%- for thing in data|sort -%}
  {%- if data[thing].type == 'Implementation' and
        'Chris Pressey' in data[thing].authors and
        data[data[thing].implementation_of[0]].type == 'Game' and
        'Chris Pressey' not in data[data[thing].implementation_of[0]].authors and
        data[thing].development_stage not in ['idea', 'work in progress'] -%}
    {% set gamekey = data[thing].implementation_of[0] %}
    <li>
      <p>
        {{ link(gamekey) }}
        â€” as {{ link(thing) }} in
        {{ link(data[thing].host_language) }}
        {% if data[thing].host_platform %}
          for {{ link(data[thing].host_platform) }}
        {% endif %}
        ({{ data[thing].inception_date }})
      </p>
      {% if data[gamekey].description %}
        {{ md2html(data[gamekey].description) }}
      {% endif %}
      {% if data[thing].description %}
        {{ md2html(data[thing].description) }}
      {% endif %}
      {% if data[thing].commentary %}
        {{ md2html(data[thing].commentary) }}
      {% endif %}
    </li>
  {%- endif -%}
{%- endfor -%}
</ul>

{% endblock content %}
