{# bespoke template #}
{% extends "base.html" %}

{% block content %}

<h3>Games I've Designed</h3>

<ul>
{%- for thing in data|sort -%}
  {%- if data[thing].type == 'Game' and
        'Chris Pressey' in data[thing].authors and
        data[thing].development_stage not in ['idea', 'work in progress', 'abandoned', 'lost'] -%}
    <li>
      <p>
        {{ link(thing) }} ({{ data[thing].inception_date }})
        {% if data[thing].online_implementations %}
          {% for oikey in data[thing].online_implementations|sort %}
            <a class="button" href="{{ data[oikey].exhibit_link }}">{%- if data[thing].type == 'Game' -%}Play{%- else -%}Try It{%- endif %} Online ({{ data[oikey].medium }})</a>
          {% endfor %}
        {% endif %}
      </p>

      {% if data[thing].images %}
        <div class="row-fluid">
          <div class="span8">
            {{ data[thing].description_html }}
          </div>
          <div class="span4">
            {% for image in data[thing].images %}
              <img src="{{ image }}">
            {% endfor %}
          </div>
        </div>
      {% elif data[thing].description_html %}
        {{ data[thing].description_html }}
      {% endif %}

      {% if data[thing].commentary_html %}
        {{ data[thing].commentary_html }}
      {% endif %}

      {# screenshot #}
    </li>
  {%- endif -%}
{%- endfor -%}
</ul>

<h3>Games I've Implemented</h3>

<ul>
{%- for thing in data|sort -%}
  {%- if data[thing].type == 'Implementation' and
        'Chris Pressey' in data[thing].authors and
        data[data[thing].implementation_of[0]].type == 'Game' and
        'Chris Pressey' not in data[data[thing].implementation_of[0]].authors and
        data[thing].development_stage not in ['idea', 'work in progress'] -%}
    {% set gamekey = data[thing].implementation_of[0] %}
    <li>
      <p>
        {{ link(gamekey) }}
        -- as {{ link(thing) }} in
        {{ link(data[thing].host_language) }}
        {% if data[thing].host_platform %}
          for {{ link(data[thing].host_platform) }}
        {% endif %}
        ({{ data[thing].inception_date }})
      </p>
      {% if data[gamekey].description_html %}
        {{ data[gamekey].description_html }}
      {% endif %}
      {% if data[thing].description_html %}
        {{ data[thing].description_html }}
      {% endif %}
      {% if data[thing].commentary_html %}
        {{ data[thing].commentary_html }}
      {% endif %}
    </li>
  {%- endif -%}
{%- endfor -%}
</ul>

{% endblock content %}
